import { PayoutSpeed } from "@/domain/bitcoin/onchain"

type FeeCase = {
  feeRate: number
  satsAmount: number
  minerFee: number
  expectedSats: number
}

type MultiplierCase = {
  feeRate: number
  expectedMultiplier: number
}

export const exponentialDecayConfigMock: ExponentialDecayFeesConfig = {
  threshold: 4000000,
  minSats: 21000,
  exponentialFactor: 21,
  networkFeeRange: { min: 1, max: 2000 },
}

export const payoutQueueConfigMock: PayoutQueueConfig[] = [
  {
    speed: PayoutSpeed.Fast,
    queueName: "fast-queue",
    displayName: "Priority",
    description: "Fast processing",
    feeMethodConfig: {
      exponentialDecay: {
        minRate: 0.0075,
        maxRate: 0.04,
        divisor: 30000,
        targetRate: 0.005,
        offset: 1.3,
        factor: 2,
      },
    },
  },
  {
    speed: PayoutSpeed.Medium,
    queueName: "medium-queue",
    displayName: "Standard",
    description: "Medium processing",
    feeMethodConfig: {
      exponentialDecay: {
        minRate: 0.005,
        maxRate: 0.03,
        divisor: 20000,
        targetRate: 0.0025,
        offset: 1.1,
        factor: 1,
      },
    },
  },
  {
    speed: PayoutSpeed.Slow,
    queueName: "slow-queue",
    displayName: "Flexible",
    description: "Slow processing",
    feeMethodConfig: {
      exponentialDecay: {
        minRate: 0.003125,
        maxRate: 0.02,
        divisor: 12500,
        targetRate: 0.001,
        offset: 1.1,
        factor: 2,
      },
    },
  },
]

export const TRANSACTION_SIZE_MATRIX: number[][] = [
  // inputs:  1    2    3    4    5    6    7    8    9   10   11   12
  /* 1 out */ [110, 178, 246, 314, 382, 450, 518, 586, 654, 722, 790, 858],
  /* 2 out */ [141, 209, 277, 345, 413, 481, 549, 617, 685, 753, 821, 889],
  /* 3 out */ [172, 240, 308, 376, 444, 512, 580, 648, 716, 784, 852, 920],
  /* 4 out */ [203, 271, 339, 407, 475, 543, 611, 679, 747, 815, 883, 951],
  /* 5 out */ [234, 302, 370, 438, 506, 574, 642, 710, 778, 846, 914, 982],
  /* 6 out */ [265, 333, 401, 469, 537, 605, 673, 741, 809, 877, 945, 1013],
  /* 7 out */ [296, 364, 432, 500, 568, 636, 704, 772, 840, 908, 976, 1044],
  /* 8 out */ [327, 395, 463, 531, 599, 667, 735, 803, 871, 939, 1007, 1075],
  /* 9 out */ [358, 426, 494, 562, 630, 698, 766, 834, 902, 970, 1038, 1106],
  /* 10 out*/ [389, 457, 525, 593, 661, 729, 797, 865, 933, 1001, 1069, 1137],
  /* 11 out*/ [420, 488, 556, 624, 692, 760, 828, 896, 964, 1032, 1100, 1168],
  /* 12 out*/ [451, 519, 587, 655, 723, 791, 859, 927, 995, 1063, 1131, 1199],
]

export const feeCapCasesMock: {
  tier1: FeeCase[]
  tier2: FeeCase[]
  tier3: FeeCase[]
} = {
  tier1: [
    { feeRate: 1, satsAmount: 21000, minerFee: 141, expectedSats: 1305 },
    { feeRate: 2, satsAmount: 21000, minerFee: 282, expectedSats: 1488 },
    { feeRate: 4, satsAmount: 21000, minerFee: 564, expectedSats: 1854 },
    { feeRate: 6, satsAmount: 21000, minerFee: 846, expectedSats: 2220 },
    { feeRate: 8, satsAmount: 21000, minerFee: 1128, expectedSats: 2586 },
    { feeRate: 10, satsAmount: 21000, minerFee: 1410, expectedSats: 2952 },
    { feeRate: 15, satsAmount: 21000, minerFee: 2115, expectedSats: 3866 },
    { feeRate: 20, satsAmount: 21000, minerFee: 2820, expectedSats: 4781 },
    { feeRate: 30, satsAmount: 21000, minerFee: 4230, expectedSats: 6610 },
    { feeRate: 40, satsAmount: 21000, minerFee: 5640, expectedSats: 8440 },
    { feeRate: 50, satsAmount: 21000, minerFee: 7050, expectedSats: 10269 },
    { feeRate: 75, satsAmount: 21000, minerFee: 10575, expectedSats: 14842 },
    { feeRate: 100, satsAmount: 21000, minerFee: 14100, expectedSats: 19416 },
    { feeRate: 125, satsAmount: 21000, minerFee: 17625, expectedSats: 23989 },
    { feeRate: 150, satsAmount: 21000, minerFee: 21150, expectedSats: 28562 },
    { feeRate: 200, satsAmount: 21000, minerFee: 28200, expectedSats: 37709 },
    { feeRate: 300, satsAmount: 21000, minerFee: 42300, expectedSats: 56002 },
    { feeRate: 400, satsAmount: 21000, minerFee: 56400, expectedSats: 74295 },
    { feeRate: 500, satsAmount: 21000, minerFee: 70500, expectedSats: 92589 },
    { feeRate: 1000, satsAmount: 21000, minerFee: 141000, expectedSats: 184055 },
    { feeRate: 2000, satsAmount: 21000, minerFee: 282000, expectedSats: 366987 },
    { feeRate: 1, satsAmount: 100000, minerFee: 141, expectedSats: 3357 },
    { feeRate: 2, satsAmount: 100000, minerFee: 282, expectedSats: 3539 },
    { feeRate: 4, satsAmount: 100000, minerFee: 564, expectedSats: 3904 },
    { feeRate: 6, satsAmount: 100000, minerFee: 846, expectedSats: 4268 },
    { feeRate: 8, satsAmount: 100000, minerFee: 1128, expectedSats: 4632 },
    { feeRate: 10, satsAmount: 100000, minerFee: 1410, expectedSats: 4996 },
    { feeRate: 15, satsAmount: 100000, minerFee: 2115, expectedSats: 5907 },
    { feeRate: 20, satsAmount: 100000, minerFee: 2820, expectedSats: 6817 },
    { feeRate: 30, satsAmount: 100000, minerFee: 4230, expectedSats: 8638 },
    { feeRate: 40, satsAmount: 100000, minerFee: 5640, expectedSats: 10459 },
    { feeRate: 50, satsAmount: 100000, minerFee: 7050, expectedSats: 12280 },
    { feeRate: 75, satsAmount: 100000, minerFee: 10575, expectedSats: 16833 },
    { feeRate: 100, satsAmount: 100000, minerFee: 14100, expectedSats: 21385 },
    { feeRate: 125, satsAmount: 100000, minerFee: 17625, expectedSats: 25938 },
    { feeRate: 150, satsAmount: 100000, minerFee: 21150, expectedSats: 30491 },
    { feeRate: 200, satsAmount: 100000, minerFee: 28200, expectedSats: 39596 },
    { feeRate: 300, satsAmount: 100000, minerFee: 42300, expectedSats: 57806 },
    { feeRate: 400, satsAmount: 100000, minerFee: 56400, expectedSats: 76017 },
    { feeRate: 500, satsAmount: 100000, minerFee: 70500, expectedSats: 94227 },
    { feeRate: 1000, satsAmount: 100000, minerFee: 141000, expectedSats: 185279 },
    { feeRate: 2000, satsAmount: 100000, minerFee: 282000, expectedSats: 367382 },
  ],
  tier2: [
    { feeRate: 1, satsAmount: 21000, minerFee: 141, expectedSats: 926 },
    { feeRate: 2, satsAmount: 21000, minerFee: 282, expectedSats: 1081 },
    { feeRate: 4, satsAmount: 21000, minerFee: 564, expectedSats: 1391 },
    { feeRate: 6, satsAmount: 21000, minerFee: 846, expectedSats: 1700 },
    { feeRate: 8, satsAmount: 21000, minerFee: 1128, expectedSats: 2010 },
    { feeRate: 10, satsAmount: 21000, minerFee: 1410, expectedSats: 2319 },
    { feeRate: 15, satsAmount: 21000, minerFee: 2115, expectedSats: 3093 },
    { feeRate: 20, satsAmount: 21000, minerFee: 2820, expectedSats: 3868 },
    { feeRate: 30, satsAmount: 21000, minerFee: 4230, expectedSats: 5416 },
    { feeRate: 40, satsAmount: 21000, minerFee: 5640, expectedSats: 6964 },
    { feeRate: 50, satsAmount: 21000, minerFee: 7050, expectedSats: 8512 },
    { feeRate: 75, satsAmount: 21000, minerFee: 10575, expectedSats: 12382 },
    { feeRate: 100, satsAmount: 21000, minerFee: 14100, expectedSats: 16252 },
    { feeRate: 125, satsAmount: 21000, minerFee: 17625, expectedSats: 20123 },
    { feeRate: 150, satsAmount: 21000, minerFee: 21150, expectedSats: 23993 },
    { feeRate: 200, satsAmount: 21000, minerFee: 28200, expectedSats: 31734 },
    { feeRate: 300, satsAmount: 21000, minerFee: 42300, expectedSats: 47215 },
    { feeRate: 400, satsAmount: 21000, minerFee: 56400, expectedSats: 62696 },
    { feeRate: 500, satsAmount: 21000, minerFee: 70500, expectedSats: 78177 },
    { feeRate: 1000, satsAmount: 21000, minerFee: 141000, expectedSats: 155582 },
    { feeRate: 2000, satsAmount: 21000, minerFee: 282000, expectedSats: 310394 },
    { feeRate: 1, satsAmount: 100000, minerFee: 141, expectedSats: 2444 },
    { feeRate: 2, satsAmount: 100000, minerFee: 282, expectedSats: 2598 },
    { feeRate: 4, satsAmount: 100000, minerFee: 564, expectedSats: 2906 },
    { feeRate: 6, satsAmount: 100000, minerFee: 846, expectedSats: 3215 },
    { feeRate: 8, satsAmount: 100000, minerFee: 1128, expectedSats: 3523 },
    { feeRate: 10, satsAmount: 100000, minerFee: 1410, expectedSats: 3831 },
    { feeRate: 15, satsAmount: 100000, minerFee: 2115, expectedSats: 4602 },
    { feeRate: 20, satsAmount: 100000, minerFee: 2820, expectedSats: 5373 },
    { feeRate: 30, satsAmount: 100000, minerFee: 4230, expectedSats: 6914 },
    { feeRate: 40, satsAmount: 100000, minerFee: 5640, expectedSats: 8456 },
    { feeRate: 50, satsAmount: 100000, minerFee: 7050, expectedSats: 9997 },
    { feeRate: 75, satsAmount: 100000, minerFee: 10575, expectedSats: 13851 },
    { feeRate: 100, satsAmount: 100000, minerFee: 14100, expectedSats: 17705 },
    { feeRate: 125, satsAmount: 100000, minerFee: 17625, expectedSats: 21558 },
    { feeRate: 150, satsAmount: 100000, minerFee: 21150, expectedSats: 25412 },
    { feeRate: 200, satsAmount: 100000, minerFee: 28200, expectedSats: 33120 },
    { feeRate: 300, satsAmount: 100000, minerFee: 42300, expectedSats: 48535 },
    { feeRate: 400, satsAmount: 100000, minerFee: 56400, expectedSats: 63950 },
    { feeRate: 500, satsAmount: 100000, minerFee: 70500, expectedSats: 79365 },
    { feeRate: 1000, satsAmount: 100000, minerFee: 141000, expectedSats: 156440 },
    { feeRate: 2000, satsAmount: 100000, minerFee: 282000, expectedSats: 310591 },
  ],
  tier3: [
    { feeRate: 1, satsAmount: 21000, minerFee: 56, expectedSats: 594 },
    { feeRate: 2, satsAmount: 21000, minerFee: 111, expectedSats: 653 },
    { feeRate: 4, satsAmount: 21000, minerFee: 222, expectedSats: 775 },
    { feeRate: 6, satsAmount: 21000, minerFee: 334, expectedSats: 898 },
    { feeRate: 8, satsAmount: 21000, minerFee: 445, expectedSats: 1019 },
    { feeRate: 10, satsAmount: 21000, minerFee: 556, expectedSats: 1141 },
    { feeRate: 15, satsAmount: 21000, minerFee: 834, expectedSats: 1446 },
    { feeRate: 20, satsAmount: 21000, minerFee: 1112, expectedSats: 1751 },
    { feeRate: 30, satsAmount: 21000, minerFee: 1668, expectedSats: 2360 },
    { feeRate: 40, satsAmount: 21000, minerFee: 2224, expectedSats: 2970 },
    { feeRate: 50, satsAmount: 21000, minerFee: 2780, expectedSats: 3579 },
    { feeRate: 75, satsAmount: 21000, minerFee: 4170, expectedSats: 5103 },
    { feeRate: 100, satsAmount: 21000, minerFee: 5560, expectedSats: 6627 },
    { feeRate: 125, satsAmount: 21000, minerFee: 6950, expectedSats: 8151 },
    { feeRate: 150, satsAmount: 21000, minerFee: 8340, expectedSats: 9675 },
    { feeRate: 200, satsAmount: 21000, minerFee: 11120, expectedSats: 12723 },
    { feeRate: 1, satsAmount: 100000, minerFee: 56, expectedSats: 1598 },
    { feeRate: 2, satsAmount: 100000, minerFee: 111, expectedSats: 1657 },
    { feeRate: 4, satsAmount: 100000, minerFee: 222, expectedSats: 1778 },
    { feeRate: 6, satsAmount: 100000, minerFee: 334, expectedSats: 1900 },
    { feeRate: 8, satsAmount: 100000, minerFee: 445, expectedSats: 2021 },
    { feeRate: 10, satsAmount: 100000, minerFee: 556, expectedSats: 2142 },
    { feeRate: 15, satsAmount: 100000, minerFee: 834, expectedSats: 2444 },
    { feeRate: 20, satsAmount: 100000, minerFee: 1112, expectedSats: 2746 },
    { feeRate: 30, satsAmount: 100000, minerFee: 1668, expectedSats: 3351 },
    { feeRate: 40, satsAmount: 100000, minerFee: 2224, expectedSats: 3956 },
    { feeRate: 50, satsAmount: 100000, minerFee: 2780, expectedSats: 4561 },
    { feeRate: 75, satsAmount: 100000, minerFee: 4170, expectedSats: 6074 },
    { feeRate: 100, satsAmount: 100000, minerFee: 5560, expectedSats: 7586 },
    { feeRate: 125, satsAmount: 100000, minerFee: 6950, expectedSats: 9099 },
    { feeRate: 150, satsAmount: 100000, minerFee: 8340, expectedSats: 10611 },
    { feeRate: 200, satsAmount: 100000, minerFee: 11120, expectedSats: 13636 },
  ],
}

export const multiplierCasesMock: {
  tier1: MultiplierCase[]
  tier2: MultiplierCase[]
  tier3: MultiplierCase[]
} = {
  tier1: [
    { feeRate: 1, expectedMultiplier: 3.3 },
    { feeRate: 2, expectedMultiplier: 2.3 },
    { feeRate: 4, expectedMultiplier: 1.8 },
    { feeRate: 8, expectedMultiplier: 1.55 },
    { feeRate: 10, expectedMultiplier: 1.5 },
    { feeRate: 15, expectedMultiplier: 1.433333 },
    { feeRate: 20, expectedMultiplier: 1.4 },
    { feeRate: 30, expectedMultiplier: 1.366667 },
    { feeRate: 40, expectedMultiplier: 1.35 },
    { feeRate: 50, expectedMultiplier: 1.34 },
    { feeRate: 75, expectedMultiplier: 1.326667 },
    { feeRate: 100, expectedMultiplier: 1.32 },
    { feeRate: 125, expectedMultiplier: 1.316 },
    { feeRate: 150, expectedMultiplier: 1.313333 },
    { feeRate: 200, expectedMultiplier: 1.31 },
    { feeRate: 300, expectedMultiplier: 1.306667 },
    { feeRate: 400, expectedMultiplier: 1.305 },
    { feeRate: 500, expectedMultiplier: 1.304 },
    { feeRate: 1000, expectedMultiplier: 1.302 },
    { feeRate: 2000, expectedMultiplier: 1.301 },
  ],
  tier2: [
    { feeRate: 1, expectedMultiplier: 2.1 },
    { feeRate: 2, expectedMultiplier: 1.6 },
    { feeRate: 4, expectedMultiplier: 1.35 },
    { feeRate: 8, expectedMultiplier: 1.225 },
    { feeRate: 10, expectedMultiplier: 1.2 },
    { feeRate: 15, expectedMultiplier: 1.166667 },
    { feeRate: 20, expectedMultiplier: 1.15 },
    { feeRate: 30, expectedMultiplier: 1.133333 },
    { feeRate: 40, expectedMultiplier: 1.125 },
    { feeRate: 50, expectedMultiplier: 1.12 },
    { feeRate: 75, expectedMultiplier: 1.113333 },
    { feeRate: 100, expectedMultiplier: 1.11 },
    { feeRate: 125, expectedMultiplier: 1.108 },
    { feeRate: 150, expectedMultiplier: 1.106667 },
    { feeRate: 200, expectedMultiplier: 1.105 },
    { feeRate: 300, expectedMultiplier: 1.103333 },
    { feeRate: 400, expectedMultiplier: 1.1025 },
    { feeRate: 500, expectedMultiplier: 1.102 },
    { feeRate: 1000, expectedMultiplier: 1.101 },
    { feeRate: 2000, expectedMultiplier: 1.1005 },
  ],
  tier3: [
    { feeRate: 1, expectedMultiplier: 3.1 },
    { feeRate: 2, expectedMultiplier: 2.1 },
    { feeRate: 4, expectedMultiplier: 1.6 },
    { feeRate: 8, expectedMultiplier: 1.35 },
    { feeRate: 10, expectedMultiplier: 1.3 },
    { feeRate: 15, expectedMultiplier: 1.233333 },
    { feeRate: 20, expectedMultiplier: 1.2 },
    { feeRate: 30, expectedMultiplier: 1.166667 },
    { feeRate: 40, expectedMultiplier: 1.15 },
    { feeRate: 50, expectedMultiplier: 1.14 },
    { feeRate: 75, expectedMultiplier: 1.126667 },
    { feeRate: 100, expectedMultiplier: 1.12 },
    { feeRate: 125, expectedMultiplier: 1.116 },
    { feeRate: 150, expectedMultiplier: 1.113333 },
    { feeRate: 200, expectedMultiplier: 1.11 },
    { feeRate: 300, expectedMultiplier: 1.106667 },
    { feeRate: 400, expectedMultiplier: 1.105 },
    { feeRate: 500, expectedMultiplier: 1.104 },
    { feeRate: 1000, expectedMultiplier: 1.102 },
    { feeRate: 2000, expectedMultiplier: 1.101 },
  ],
}
